!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(global,(function(){return function(){"use strict";var e={347:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(r(293)),c=a(r(375)),l=a(r(959)),f=a(r(292)),h=a(r(17)),p=function(){function e(e){var t=this;this.name="MyHtmlWebpackPlugin",this.filePathNames=new Set,this.copyMoveFolderAsync=function(e,r){return n(t,void 0,void 0,(function(){var t,s,o=this;return i(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),[4,this.makeDirIfNotExists(r)];case 1:return a.sent(),[4,f.default.readdir(e)];case 2:return t=a.sent(),[4,Promise.all(t.map((function(t){return n(o,void 0,void 0,(function(){var n,s;return i(this,(function(i){switch(i.label){case 0:return n=h.default.join(e,t),s=h.default.join(r,t),[4,f.default.stat(n)];case 1:return i.sent().isDirectory()?[4,this.copyMoveFolderAsync(n,s)]:[3,3];case 2:return i.sent(),[3,5];case 3:return[4,f.default.copyFile(n,s)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))})))];case 3:return a.sent(),[3,5];case 4:return s=a.sent(),this.logger.error(s),[3,5];case 5:return[2]}}))}))},this.injectScript=function(e,r){if(t.options.htmlInjectScriptTag){var n;if(-1!==(n="head"===t.options.htmlInjectScriptTag?e.source.indexOf("</head>"):e.source.lastIndexOf("</body>"))){var i='<script src="'.concat(r,'"><\/script>'),s=t.options.htmlScriptTagAttributes;if(s){for(var o in i="<script ",s){var a=s[o];i+="string"==typeof a?"".concat(o,'="').concat(a,'" '):"".concat(o," ")}i=(i+=' src="'.concat(r,'"><\/script>')).replace(/\s+/g," ")}e.source=e.source.slice(0,n)+i+e.source.slice(n)}}},this.makeDirIfNotExists=function(e){return n(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.fileExists(e)];case 1:return t.sent()?[2]:[4,f.default.mkdir(e,{recursive:!0})];case 2:return t.sent(),[2]}}))}))},this.options=e,this.fileBundler=new u.default({className:this.options.htmlIncludePrefixName||this.name,pattern:"include",includeProperties:this.options.htmlIncludeProperties})}return e.prototype.apply=function(e){var t=this;this.logger=e.getInfrastructureLogger(this.name),e.hooks.done.tapAsync(this.name,(function(e,r){return n(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.handleExternalAssets(e)];case 1:return t.sent(),e.compilation.fileDependencies.addAll(this.filePathNames),r(),[2]}}))}))}))},e.prototype.handleExternalAssets=function(e){return n(this,void 0,void 0,(function(){var t,r,n,s,o,a,u,c,f,p,d,m,y,v,b,x,g,P;return i(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,10,,11]),t=e.compilation,r=t.compiler,(n=this.getModifiedFile(r))&&!this.filePathNames.has(n))return[2];for(u in s="production"===r.options.mode,o=this.options.entry,a=[],o)a.push(u);c=0,i.label=1;case 1:return c<a.length?(u=a[c])in o?(f=u,"filePath"in(p=this.options.entry[f])&&p.outputFilePath?n?[3,3]:[4,this.copyMoveFolderAsync(p.filePath,p.outputFilePath)]:[3,4]):[3,8]:[3,9];case 2:i.sent(),i.label=3;case 3:return[3,8];case 4:return"filePathName"in p&&p.outputFilePathName?(d=p.filePathName.endsWith(".html"),m=p.filePathName.endsWith(".scss"),y=n&&n.endsWith(".scss"),d&&!n||d&&!y?(g=this.fileBundler.bundle(p.filePathName),s&&this.minify(g),(v=t.namedChunks.get(f))&&(b=Array.from(v.files)[0]||f+".js",this.injectScript(g,b)),[4,this.output(p.outputFilePathName,g)]):[3,6]):[3,8];case 5:return i.sent(),[3,8];case 6:return m&&!n||m&&y?(x=l.default.compile(p.filePathName,{style:s?"compressed":void 0,alertColor:!1}),(g={source:x.css,filePathNames:[]}).filePathNames=x.loadedUrls.map((function(e){return h.default.resolve(e.pathname.slice(1))})),[4,this.output(p.outputFilePathName,g)]):[3,8];case 7:return i.sent(),[3,8];case 8:return c++,[3,1];case 9:return[3,11];case 10:return P=i.sent(),this.logger.error(P),[3,11];case 11:return[2]}}))}))},e.prototype.getModifiedFile=function(e){var t=e.modifiedFiles;return t&&o([],s(t),!1)[0]||null},e.prototype.minify=function(e){e.source=c.default.minify(e.source,{removeComments:!0,continueOnParseError:!0,collapseWhitespace:!0,keepClosingSlash:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,useShortDoctype:!0})},e.prototype.output=function(e,t){return n(this,void 0,void 0,(function(){var r,n,s,o=this;return i(this,(function(i){switch(i.label){case 0:t.filePathNames.forEach((function(e){o.filePathNames.add(e)})),i.label=1;case 1:return i.trys.push([1,4,,5]),e=h.default.resolve(e),r=h.default.dirname(e),[4,this.makeDirIfNotExists(r)];case 2:return i.sent(),[4,f.default.writeFile(e,t.source)];case 3:return i.sent(),[3,5];case 4:return n=i.sent(),s=n,this.logger.error(s),[3,5];case 5:return[2]}}))}))},e.prototype.fileExists=function(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,f.default.access(e)];case 1:return r.sent(),[2,!0];case 2:if("ENOENT"===(t=r.sent()).code)return[2,!1];throw t;case 3:return[2]}}))}))},e}();t.default=p},293:function(e){e.exports=require("file-bundler")},375:function(e){e.exports=require("html-minifier")},959:function(e){e.exports=require("sass")},292:function(e){e.exports=require("fs/promises")},17:function(e){e.exports=require("path")}},t={},r=function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(347);return r.default}()}));