!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var o in i)("object"==typeof exports?exports:e)[o]=i[o]}}(global,(function(){return function(){"use strict";var e={473:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.error=function(e,t){console.log("[31m[1m","".concat(e," Exception:\n"),String(t),"[0m")},e}();t.default=i},347:function(e,t,i){var o=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,r,n=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}return s},r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var o,r=0,n=t.length;r<n;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(354),a=n(i(293)),u=n(i(375)),l=n(i(147)),c=n(i(17)),p=n(i(473)),f=function(){function e(e){var t=this;this.name="MyHtmlWebpackPlugin",this.filePathNames=new Set,this.handleCompilationAssets=function(e,i){t.handleExternalHtmlFiles(e,i),t.options.jsSource&&t.options.jsSource.watchFilePathNames&&t.injectHtmlToJsSource(e,i),i.fileDependencies.addAll(t.filePathNames)},this.options=e}return e.prototype.apply=function(e){var t=this;e.hooks.compilation.tap(this.name,(function(i){i.hooks.processAssets.tap(t.name,(function(){t.handleCompilationAssets(e,i)}))}))},e.prototype.handleExternalHtmlFiles=function(e,t){var i=this,o=this.getModifiedFile(e);if(this.options.output&&this.options.output.path){if((!o||o.endsWith(".html"))&&!(o&&this.options.output.exclude&&o.includes(this.options.output.exclude))){var r=void 0===this.options.minify?"production"===e.options.mode:Boolean(this.options.minify),n=new a.default({className:this.options.includePrefixName||this.name,pattern:"include",includeProperties:this.options.includeProperties});for(var s in this.options.entry){var u=this.options.entry[s],l=n.bundle(u.filePathName),c=l.source;l.filePathNames.forEach((function(e){i.filePathNames.add(e)})),r&&(c=this.minify(c)),this.output(this.options.output.path,u.outputFilename,c)}}}else p.default.error(this.name,"the output path is missing.")},e.prototype.injectHtmlToJsSource=function(e,t){var i=this,o=this.getModifiedFile(e);if(!o||o.match(/(\.js|\.ts|\.html)$/)){var r=new a.default({className:this.options.includePrefixName||this.name,pattern:"include",includeProperties:this.options.includeProperties});t.getAssets().forEach((function(e){if(e.name.match(/(\.js|\.ts)$/)){var o=e.source.source().toString();try{var n=!1;o=o.replace(r.includePattern,(function(e,t,o){var s;if("string"!=typeof o)throw new Error("something went wrong with regex");if(o.startsWith("."))return i.options.includeProperties&&"object"==typeof i.options.includeProperties?encodeURI(i.options.includeProperties[o.replace(/^\./,"")]||""):"";var a=o.replace(/["'`()]+/g,"");a=c.default.resolve((null===(s=i.options.jsSource)||void 0===s?void 0:s.rootDir)||"",a.replace(/^[\\\/]*/g,""));var u=r.bundle(a),l=u.source;return u.filePathNames.forEach((function(e){i.filePathNames.add(e)})),n=!0,encodeURI(i.minify(l))})),n&&t.updateAsset(e.name,new s.sources.RawSource(o))}catch(e){var a=e;p.default.error(i.name,a)}}}))}},e.prototype.getModifiedFile=function(e){var t=e.modifiedFiles;return t&&r([],o(t),!1)[0]||null},e.prototype.minify=function(e){return u.default.minify(e,{removeComments:!0,continueOnParseError:!0,collapseWhitespace:!0,keepClosingSlash:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,useShortDoctype:!0})},e.prototype.output=function(e,t,i){try{var o=c.default.resolve(e,t.replace(/^[\\\/]/g,"")),r=c.default.dirname(o),n=c.default.relative(process.cwd(),r);l.default.existsSync(n)||l.default.mkdirSync(n,{recursive:!0}),l.default.writeFileSync(o,i)}catch(e){var s=e;p.default.error(this.name,s)}},e}();t.default=f},293:function(e){e.exports=require("file-bundler")},375:function(e){e.exports=require("html-minifier")},354:function(e){e.exports=require("webpack")},147:function(e){e.exports=require("fs")},17:function(e){e.exports=require("path")}},t={},i=function i(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,i),n.exports}(347);return i.default}()}));