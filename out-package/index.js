!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var r in i)("object"==typeof exports?exports:t)[r]=i[r]}}(global,(function(){return function(){"use strict";var t={347:function(t,e,i){var r=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,o,n=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var r,o=0,n=e.length;o<n;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(i(293)),a=n(i(375)),c=n(i(147)),l=n(i(17)),u=function(){function t(t){var e=this;this.name="MyHtmlWebpackPlugin",this.filePathNames=new Set,this.injectScript=function(t,i){if(e.options.injectScriptTag){var r;if(-1!==(r="head"===e.options.injectScriptTag?t.source.indexOf("</head>"):t.source.lastIndexOf("</body>"))){var o='<script src="'.concat(i,'"><\/script>'),n=e.options.scriptTagAttributes;if(n){for(var s in o="<script ",n){var a=n[s];o+="string"==typeof a?"".concat(s,'="').concat(a,'" '):"".concat(s," ")}o=(o+=' src="'.concat(i,'"><\/script>')).replace(/\s+/g," ")}t.source=t.source.slice(0,r)+o+t.source.slice(r)}}},this.options=t}return t.prototype.apply=function(t){var e=this;this.logger=t.getInfrastructureLogger(this.name),t.hooks.done.tap(this.name,(function(t){e.handleExternalHtmlFiles(t),t.compilation.fileDependencies.addAll(e.filePathNames)}))},t.prototype.handleExternalHtmlFiles=function(t){var e=this,i=t.compilation,r=i.compiler,o=this.getModifiedFile(r);if(this.options.output&&this.options.output.path){if(!o||this.filePathNames.has(o)){var n="production"===r.options.mode||Boolean(this.options.minify),a=new s.default({className:this.options.prefixName||this.name,pattern:"include",includeProperties:this.options.staticProperties});for(var c in this.options.entry){var l=this.options.entry[c],u=a.bundle(l.filePathName);this.filePathNames.clear(),u.filePathNames.forEach((function(t){e.filePathNames.add(t)})),n&&this.minify(u);var p=i.namedChunks.get(c);if(p){var f=Array.from(p.files)[0]||c+".js";this.injectScript(u,f)}this.output(this.options.output.path,l.outputFilename,u)}}}else this.logger.error("the output path is missing.")},t.prototype.getModifiedFile=function(t){var e=t.modifiedFiles;return e&&o([],r(e),!1)[0]||null},t.prototype.minify=function(t){t.source=a.default.minify(t.source,{removeComments:!0,continueOnParseError:!0,collapseWhitespace:!0,keepClosingSlash:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,useShortDoctype:!0})},t.prototype.output=function(t,e,i){try{var r=l.default.resolve(t,e.replace(/^[\\\/]/g,"")),o=l.default.dirname(r),n=l.default.relative(process.cwd(),o);c.default.existsSync(n)||c.default.mkdirSync(n,{recursive:!0}),c.default.writeFileSync(r,i.source)}catch(t){var s=t;this.logger.error(s)}},t}();e.default=u},293:function(t){t.exports=require("file-bundler")},375:function(t){t.exports=require("html-minifier")},147:function(t){t.exports=require("fs")},17:function(t){t.exports=require("path")}},e={},i=function i(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,i),n.exports}(347);return i.default}()}));