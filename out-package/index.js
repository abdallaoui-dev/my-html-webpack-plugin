!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var o in i)("object"==typeof exports?exports:e)[o]=i[o]}}(global,(function(){return function(){"use strict";var e={473:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.error=function(e,t){console.log("[31m[1m","".concat(e," Exception:\n"),String(t),"[0m")},e}();t.default=i},347:function(e,t,i){var o=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var o,n=0,r=t.length;n<r;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(354),a=r(i(293)),u=r(i(375)),l=r(i(147)),c=r(i(17)),p=r(i(473)),f=function(){function e(e){var t=this;this.name="MyHtmlWebpackPlugin",this.filePathNameCache=new Set,this.handleCompilationAssets=function(e,i){t.handleExternalHtmlFiles(e,i),t.options.jsSource&&t.options.jsSource.watchFilePathNames&&t.handleHtmlInjsFiles(i)},this.options=e}return e.prototype.apply=function(e){var t=this;e.hooks.compilation.tap(this.name,(function(i){i.hooks.processAssets.tap({name:t.name,stage:s.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE},(function(){return t.handleCompilationAssets(e,i)}))}))},e.prototype.handleExternalHtmlFiles=function(e,t){var i=this,o=this.getFileModifiedFile(e);if(this.options.output&&this.options.output.path)if(!o||o.endsWith(".html"))if(o&&this.options.output.exclude&&o.includes(this.options.output.exclude))this.filePathNameCache.forEach((function(e){return t.fileDependencies.add(e)}));else{this.filePathNameCache.clear();var n=void 0===this.options.minify?"production"===e.options.mode:Boolean(this.options.minify),r=new a.default({className:this.options.includePrefixName||this.name,pattern:"include",includeProperties:this.options.includeProperties});for(var s in this.options.entry){var u=this.options.entry[s],l=r.bundle(u.filePathName),c=l.source;l.filePathNames.forEach((function(e){i.filePathNameCache.add(e),t.fileDependencies.add(e)})),n&&(c=this.minify(c)),this.output(this.options.output.path,u.outputFilename,c)}}else this.filePathNameCache.forEach((function(e){return t.fileDependencies.add(e)}));else p.default.error(this.name,"the output path is missing.")},e.prototype.minify=function(e){return u.default.minify(e,{removeComments:!0,continueOnParseError:!0,collapseWhitespace:!0,keepClosingSlash:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,useShortDoctype:!0})},e.prototype.output=function(e,t,i){try{var o=c.default.resolve(e,t.replace(/^[\\\/]/g,"")),n=c.default.dirname(o),r=c.default.relative(process.cwd(),n);l.default.existsSync(r)||l.default.mkdirSync(r,{recursive:!0}),l.default.writeFileSync(o,i)}catch(e){var s=e;p.default.error(this.name,s)}},e.prototype.handleHtmlInjsFiles=function(e){var t=this,i=e.getAssets(),o=new a.default({className:this.options.includePrefixName||this.name,pattern:"include",includeProperties:this.options.includeProperties});i.forEach((function(i){var n=i.source.source().toString();try{var r=n.replace(o.includePattern,(function(i,n,r){var s;if("string"!=typeof r)throw new Error("something went wrong with regex");if(r.startsWith("."))return t.options.includeProperties&&"object"==typeof t.options.includeProperties?encodeURI(t.options.includeProperties[r.replace(/^\./,"")]||""):"";var a=r.replace(/["'`()]+/g,"");a=c.default.resolve((null===(s=t.options.jsSource)||void 0===s?void 0:s.rootDir)||"",a.replace(/^[\\\/]*/g,""));var u=o.bundle(a),l=u.source;return u.filePathNames.forEach((function(t){return e.fileDependencies.add(t)})),encodeURI(t.minify(l))})),a=new s.sources.RawSource(r);e.updateAsset(i.name,a)}catch(e){var u=e;p.default.error(t.name,u)}}))},e.prototype.getFileModifiedFile=function(e){var t=e.modifiedFiles;return t&&n([],o(t),!1)[0]||null},e}();t.default=f},293:function(e){e.exports=require("file-bundler")},375:function(e){e.exports=require("html-minifier")},354:function(e){e.exports=require("webpack")},147:function(e){e.exports=require("fs")},17:function(e){e.exports=require("path")}},t={},i=function i(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,i),r.exports}(347);return i.default}()}));